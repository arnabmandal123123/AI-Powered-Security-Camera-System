<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESP32-CAM Security System</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.11.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd@2.2.3"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ”’ ESP32-CAM Security System</h1>
            <p class="subtitle">AI-Powered Object Detection & Monitoring</p>
        </header>

        <!-- Security Status Bar -->
        <div class="security-status-bar">
            <div class="status-item">
                <span class="status-icon">ğŸ“¡</span>
                <span class="status-label">Connection:</span>
                <span id="connectionStatus" class="status-value">Disconnected</span>
            </div>
            <div class="status-item">
                <span class="status-icon">ğŸ¤–</span>
                <span class="status-label">AI Detection:</span>
                <span id="aiStatus" class="status-value">Inactive</span>
            </div>
            <div class="status-item">
                <span class="status-icon">ğŸš¨</span>
                <span class="status-label">Alarm:</span>
                <span id="alarmStatus" class="status-value">Disabled</span>
            </div>
        </div>

        <!-- Alert Banner -->
        <div id="alertBanner" class="alert-banner hidden">
            <span class="alert-icon">âš ï¸</span>
            <span id="alertMessage" class="alert-message"></span>
            <button id="dismissAlertBtn" class="btn btn-small" style="margin-left: auto;">âœ• Dismiss</button>
        </div>

        <!-- Connection Settings -->
        <div class="card">
            <h2>ğŸ“¡ Camera Connection</h2>
            <div class="input-group">
                <label for="esp32IP">ESP32-CAM IP Address:</label>
                <input type="text" id="esp32IP" placeholder="192.168.1.35" value="">
            </div>
            <div class="button-group">
                <button id="setIPBtn" class="btn btn-primary">Set IP Address</button>
                <button id="testConnectionBtn" class="btn btn-secondary">Test Connection</button>
            </div>
        </div>

        <!-- Camera Feed -->
        <div class="card">
            <h2>ğŸ“¹ Live Camera Feed</h2>
            <div class="camera-container">
                <img id="cameraFeed" alt="ESP32-CAM Stream">
                <canvas id="detectionCanvas"></canvas>
                <div id="cameraPlaceholder" class="camera-placeholder">
                    <p>ğŸ“· Camera feed will appear here</p>
                    <p class="placeholder-hint">Set IP address and start streaming</p>
                </div>
            </div>
            <div class="button-group">
                <button id="startStreamBtn" class="btn btn-primary">â–¶ Start Stream</button>
                <button id="stopStreamBtn" class="btn btn-secondary" disabled>â¹ Stop Stream</button>
                <button id="captureBtn" class="btn btn-accent">ğŸ“¸ Capture Photo</button>
            </div>
        </div>

        <!-- AI Detection Controls -->
        <div class="card">
            <h2>ğŸ¤– AI Object Detection</h2>
            <div class="detection-info">
                <p>Powered by TensorFlow.js COCO-SSD model</p>
                <p class="info-text">Detects 80+ object classes in real-time</p>
            </div>
            <div class="button-group">
                <button id="enableDetectionBtn" class="btn btn-primary">ğŸ” Enable Detection</button>
                <button id="disableDetectionBtn" class="btn btn-secondary" disabled>â¸ Disable Detection</button>
            </div>
            
            <!-- Alert Trigger Settings -->
            <div class="alert-triggers">
                <h3>ğŸš¨ Alert Triggers</h3>
                <p class="info-text">Select objects that will trigger an alert when detected:</p>
                <div class="trigger-grid">
                    <label class="object-checkbox">
                        <input type="checkbox" value="person" checked>
                        <span>ğŸ‘¤ Person</span>
                    </label>
                    <label class="object-checkbox">
                        <input type="checkbox" value="dog">
                        <span>ğŸ• Dog</span>
                    </label>
                    <label class="object-checkbox">
                        <input type="checkbox" value="cat">
                        <span>ğŸˆ Cat</span>
                    </label>
                    <label class="object-checkbox">
                        <input type="checkbox" value="car">
                        <span>ğŸš— Car</span>
                    </label>
                    <label class="object-checkbox">
                        <input type="checkbox" value="truck">
                        <span>ğŸšš Truck</span>
                    </label>
                    <label class="object-checkbox">
                        <input type="checkbox" value="bicycle">
                        <span>ğŸš´ Bicycle</span>
                    </label>
                    <label class="object-checkbox">
                        <input type="checkbox" value="motorcycle">
                        <span>ğŸï¸ Motorcycle</span>
                    </label>
                    <label class="object-checkbox">
                        <input type="checkbox" value="backpack">
                        <span>ğŸ’ Backpack</span>
                    </label>
                    <label class="object-checkbox">
                        <input type="checkbox" value="cell phone">
                        <span>ğŸ“± Phone</span>
                    </label>
                    <label class="object-checkbox">
                        <input type="checkbox" value="laptop">
                        <span>ğŸ’» Laptop</span>
                    </label>
                    <label class="object-checkbox">
                        <input type="checkbox" value="tv">
                        <span>ğŸ“º TV</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Alarm Control -->
        <div class="card">
            <h2>ğŸš¨ Alarm System</h2>
            <div class="button-group">
                <button id="enableAlarmBtn" class="btn btn-danger">ğŸ”” Enable Alarm</button>
                <button id="disableAlarmBtn" class="btn btn-secondary" disabled>ğŸ”• Disable Alarm</button>
            </div>
        </div>

        <!-- Statistics & Detection Results -->
        <div class="stats-container">
            <div class="card stat-card">
                <h3>ğŸ“Š Detection Statistics</h3>
                <div class="stat-item">
                    <span class="stat-label">Objects Detected:</span>
                    <span id="detectionCount" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Alerts Triggered:</span>
                    <span id="alertCount" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Last Detection:</span>
                    <span id="lastDetection" class="stat-value">None</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Detection Active:</span>
                    <span id="detectionActive" class="stat-value">No</span>
                </div>
            </div>

            <div class="card">
                <h3>ğŸ“ Event Log</h3>
                <div id="eventLog" class="event-log">
                    <p class="log-entry info">System initialized and ready</p>
                </div>
            </div>
        </div>

        <!-- Captured Snapshots -->
        <div class="card">
            <h2>ğŸ“¸ Captured Snapshots</h2>
            <div id="snapshotsContainer" class="snapshots-grid">
                <p class="placeholder-text">No snapshots captured yet</p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
